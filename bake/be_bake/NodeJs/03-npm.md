## NPM

### 1. Node.jsè½¯ä»¶åŒ…

> æ¯ä¸€ä¸ªåŸºäº Node.js å¹³å°å¼€å‘çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯ Node.js è½¯ä»¶åŒ…ã€‚
>
> æ‰€æœ‰ Node.js è½¯ä»¶åŒ…éƒ½è¢«æ‰˜ç®¡åœ¨ www.npmjs.com ä¸­ã€‚





### 2. ä»€ä¹ˆæ˜¯ NPM

> å…¨ç§°ï¼šNode Package Manager , Node .jsçš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ŒNode.js ç¯å¢ƒä¸­çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚
>
> å®ƒå¯ä»¥å°† Node è½¯ä»¶åŒ…æ·»åŠ åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å¹¶å¯¹å…¶è¿›è¡Œç®¡ç†ï¼Œæ¯”å¦‚ä¸‹è½½ï¼Œåˆ é™¤ï¼Œæ›´æ–°ï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ç­‰ã€‚
>
> å®ƒæ²¡æœ‰ç”¨æˆ·ç•Œé¢ï¼Œéœ€è¦åœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­é€šè¿‡å‘½ä»¤çš„æ–¹å¼ä½¿ç”¨ï¼Œå¯¹åº”çš„å‘½ä»¤å°±æ˜¯ npmã€‚
>
> NPM å’Œ Node æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼Œåªæ˜¯è¢«æ†ç»‘å®‰è£…äº†ï¼Œå¯ä»¥é€šè¿‡ç‰ˆæœ¬å·è¯æ˜ã€‚
>
> Node.js çš„åŒ…åŸºæœ¬éµå¾ª CommonJS è§„èŒƒï¼Œå°†ä¸€ç»„ç›¸å…³çš„æ¨¡å—ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å·¥å…·



### 3. package.json

> Node.js è§„å®šåœ¨æ¯ä¸€ä¸ªè½¯ä»¶åŒ…ä¸­éƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªå«åš package.json çš„æ–‡ä»¶ã€‚
>
> å®ƒæ˜¯åº”ç”¨ç¨‹åºçš„æè¿°æ–‡ä»¶ï¼ŒåŒ…å«å’Œåº”ç”¨ç¨‹åºç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åº”ç”¨åç§°ï¼Œåº”ç”¨ç‰ˆæœ¬ï¼Œåº”ç”¨ä½œè€…ç­‰ç­‰ã€‚ 
>
> é€šè¿‡ package.json æ–‡ä»¶å¯ä»¥æ–¹ä¾¿ç®¡ç†åº”ç”¨å’Œå‘å¸ƒåº”ç”¨ã€‚ 
>
> æŸ¥çœ‹ npm çš„ç‰ˆæœ¬ `npm -v `
>
> åˆ›å»º package.json æ–‡ä»¶: `npm init` 
>
> å¿«é€Ÿåˆ›å»º package.json æ–‡ä»¶: `npm init --yes`

è¿è¡Œåä¼šåˆ›å»º package.json æ–‡ä»¶             

```json
{
  "name": "1-npm",      #åŒ…çš„åå­—
  "version": "1.0.0",   #åŒ…çš„ç‰ˆæœ¬
  "description": "",    #åŒ…çš„æè¿°
  "main": "index.js",   #åŒ…çš„å…¥å£æ–‡ä»¶
  "scripts": {			#è„šæœ¬é…ç½®
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",			#ä½œè€…
  "license": "ISC"		#ç‰ˆæƒå£°æ˜
}
```

> æ³¨æ„ç”Ÿæˆçš„åŒ…åä¸èƒ½ä½¿ç”¨ä¸­æ–‡ï¼Œå¤§å†™ ï¼ï¼



å…³äºå¼€æºè¯ä¹¦æ‰©å±•é˜…è¯»

<http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html>



### 4.  ä¸‹è½½Node.jsè½¯ä»¶åŒ…

> ä¸€èˆ¬åœ¨æœç´¢å·¥å…·åŒ…çš„æ—¶å€™ï¼Œä¼šåˆ° https://npmjs.org æœç´¢
>
> åœ¨åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤ï¼š `npm install åŒ…å`  æˆ–è€… `npm i  åŒ…å`

`npm install lodash`è½¯ä»¶åŒ…ä¸‹è½½å®Œæˆåä¼šå‘ç”Ÿä¸‰ä»¶äº‹ï¼š

1. è½¯ä»¶åŒ…ä¼šè¢«å­˜å‚¨åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æœåœ¨åº”ç”¨ä¸­ä¸å­˜åœ¨æ­¤æ–‡ä»¶å¤¹ï¼Œnpm ä¼šè‡ªåŠ¨åˆ›å»ºã€‚
2. è½¯ä»¶åŒ…ä¼šè¢«è®°å½•åœ¨ package.json æ–‡ä»¶ä¸­. åŒ…å«è½¯ä»¶åŒ…çš„åå­—ä»¥åŠç‰ˆæœ¬å·ã€‚
3. npm ä¼šåœ¨åº”ç”¨ä¸­åˆ›å»º package-lock.json æ–‡ä»¶, ç”¨äºè®°å½•è½¯ä»¶åŒ…åŠè½¯ä»¶åŒ…çš„ä¾èµ–åŒ…çš„ä¸‹è½½åœ°å€åŠç‰ˆæœ¬ã€‚

#### å®‰è£…å·¥å…·åŒ…

```sh
npm install jquery
npm i jquery

# å®‰è£…å¹¶åœ¨ package.json ä¸­ä¿å­˜åŒ…çš„ä¿¡æ¯(dependencies å±æ€§ ç”Ÿäº§ä¾èµ–)
npm install jquery --save
npm install jquery -S

# å®‰è£…å¹¶åœ¨ package.json ä¸­ä¿å­˜åŒ…çš„ä¿¡æ¯(devDependencies å±æ€§  å¼€å‘ä¾èµ–)
npm install babel --save-dev
npm install babel -D
```

>  6 ç‰ˆæœ¬çš„ npm ï¼Œå®‰è£…åŒ…æ—¶ä¼šè‡ªåŠ¨ä¿å­˜åœ¨ dependencies ä¸­ï¼Œå¯ä»¥ä¸ç”¨å†™ --save



#### æœ¬åœ°å®‰è£…å’Œå…¨å±€å®‰è£…

> æœ¬åœ°å®‰è£…ï¼šå°†è½¯ä»¶åŒ…ä¸‹è½½åˆ°åº”ç”¨æ ¹ç›®å½•ä¸‹çš„ `node_modules` æ–‡ä»¶å¤¹ä¸­ï¼Œè½¯ä»¶åŒ…åªèƒ½åœ¨å½“å‰åº”ç”¨ä¸­ ä½¿ç”¨ã€‚
>
> å…¨å±€å®‰è£…ï¼šå°†è½¯ä»¶åŒ…ä¸‹è½½åˆ°æ“ä½œç³»ç»Ÿçš„æŒ‡å®šç›®å½•ä¸­ï¼Œå¯ä»¥åœ¨ä»»ä½•åº”ç”¨ä¸­ä½¿ç”¨ã€‚
>
> å…¨å±€å®‰è£…ä¸€èˆ¬ç”¨äºå®‰è£…å…¨å±€å·¥å…·ï¼Œå¦‚ `cnpm`ï¼Œ`yarn`ï¼Œ`webpack` ï¼Œ`gulp`ç­‰ï¼Œå…¨å±€å‘½ä»¤çš„å®‰è£…ä½ç½®
>
> é€šè¿‡ -g é€‰é¡¹å°†è½¯ä»¶åŒ…å®‰è£…åˆ°å…¨å±€ï¼š `npm install <pkg>  -g`
>
> æŸ¥çœ‹å…¨å±€è½¯ä»¶åŒ…å®‰è£…ä½ç½®ï¼š `npm root -g`
>
> åˆ é™¤å…¨å±€ä¸­çš„è½¯ä»¶åŒ…: `npm un npm-check-updates -g`
>
> æŸ¥çœ‹å…¨å±€ä¸­å®‰è£…äº†å“ªäº›è½¯ä»¶åŒ…: `npm list -g --depth 0`
>
> æŸ¥çœ‹å…¨å±€ä¸­æœ‰å“ªäº›è¿‡æœŸè½¯ä»¶åŒ…: `npm outdated -g`

```
C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Roaming\npm
```



#### nodemon

> é—®é¢˜ï¼šåœ¨ node ç¯å¢ƒä¸­æ¯æ¬¡ä¿®æ”¹ JavaScript æ–‡ä»¶åéƒ½éœ€è¦é‡æ–°æ‰§è¡Œè¯¥æ–‡ä»¶æ‰èƒ½çœ‹åˆ°æ•ˆæœã€‚
>
> é€šè¿‡ nodemon å¯ä»¥è§£å†³æ­¤çƒ¦æ¼ï¼Œå®ƒæ˜¯å‘½ä»¤å·¥å…·è½¯ä»¶åŒ…ï¼Œå¯ä»¥ç›‘æ§æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°æ‰§è¡Œæ–‡ä»¶ã€‚
>
> `npm install nodemon@2.0.7 -g`



#### npm-check-updates å¼ºåˆ¶æ›´æ–°

> npm-check-updates å¯ä»¥æŸ¥çœ‹åº”ç”¨ä¸­æœ‰å“ªäº›è½¯ä»¶åŒ…è¿‡æœŸäº†ï¼Œå¯ä»¥å¼ºåˆ¶æ›´æ–° package.json æ–‡ä»¶ä¸­ è½¯ä»¶åŒ…ç‰ˆæœ¬
>
> å°† npm-check-updates å®‰è£…åˆ°å…¨å±€ï¼š `npm install npm-check-updates -g`
>
>  æŸ¥çœ‹è¿‡æœŸè½¯ä»¶åŒ…ï¼š `npm-check-updates`
>
> æ›´æ–° package.jsonï¼š `ncu -u`



### 5. ä½¿ç”¨ Node.js è½¯ä»¶åŒ…

> åœ¨å¼•å…¥ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…æ—¶ï¼Œåœ¨ require æ–¹æ³•ä¸­ä¸éœ€è¦åŠ å…¥è·¯å¾„ä¿¡æ¯ï¼Œåªéœ€è¦ä½¿ç”¨è½¯ä»¶åŒ…çš„åå­—å³å¯ï¼Œ require æ–¹æ³•ä¼šè‡ªåŠ¨å» node_modules æ–‡ä»¶å¤¹ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚

```js
const _ = require("lodash")
const array = ["a", "b", "c", "d"]
// chunk å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œåˆ†ç»„
// å‚æ•°ä¸€è¡¨ç¤ºè¦è¿›è¡Œæ“ä½œçš„æ•°ç»„
// å‚æ•°äºŒè¡¨ç¤ºæ¯ä¸€ç»„ä¸­åŒ…å«çš„å…ƒç´ ä¸ªæ•°
console.log(_.chunk(array, 2)) // [ [ 'a', 'b' ], [ 'c', 'd' ] ]
```



### 6. è½¯ä»¶åŒ…ä¾èµ–é—®é¢˜è¯´æ˜

1. æ¯”å¦‚åœ¨æˆ‘çš„åº”ç”¨ä¸­è¦ä¾èµ– mongoose è½¯ä»¶åŒ…ï¼Œäºæ˜¯æˆ‘ä¸‹è½½äº†å®ƒï¼Œä½†æ˜¯åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­ é™¤äº†åŒ…å« mongoose ä»¥å¤–è¿˜å¤šå‡ºäº†å¾ˆå¤šå…¶ä»–è½¯ä»¶åŒ…ï¼Œä¸ºä»€ä¹ˆä¼šå¤šå‡ºè¿™ä¹ˆå¤šè½¯ä»¶åŒ…å‘¢ï¼Ÿ 

> å®é™…ä¸Šå®ƒä»¬åˆæ˜¯ mongoose ä¾èµ–çš„è½¯ä»¶åŒ…ã€‚

2. ä¸ºä»€ä¹ˆ mongoose ä¾èµ–çš„è½¯ä»¶åŒ…ä¸æ”¾åœ¨ mongoose æ–‡ä»¶å¤¹ä¸­å‘¢ï¼Ÿ

> åœ¨æ—©æœŸçš„ npm ç‰ˆæœ¬ä¸­, æŸä¸ªè½¯ä»¶åŒ…ä¾èµ–çš„å…¶ä»–è½¯ä»¶åŒ…éƒ½ä¼šè¢«æ”¾ç½®åœ¨è¯¥è½¯ä»¶åŒ…å†…éƒ¨çš„ node_modules æ–‡ä»¶å¤¹ä¸­ï¼Œä½†æ˜¯è¿™æ ·åšå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å¾ˆå¤šè½¯ä»¶åŒ…éƒ½ä¼šæœ‰ç›¸åŒçš„ä¾ èµ–ï¼Œå¯¼è‡´å¼€å‘è€…åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä¼šä¸‹è½½å¾ˆå¤šé‡å¤çš„è½¯ä»¶åŒ…ï¼Œæ¯”å¦‚ A ä¾èµ– Xï¼ŒB ä¾èµ– Xï¼ŒC ä¾èµ– Xï¼Œåœ¨ è¿™ç§æƒ…å†µä¸‹ X å°±ä¼šè¢«é‡å¤ä¸‹è½½ä¸‰æ¬¡ã€‚ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æ–‡ä»¶å¤¹åµŒå¥—å±‚æ¬¡å¤ªæ·±ï¼Œå¯¼è‡´æ–‡ä»¶å¤¹åœ¨ windows ç³»ç»Ÿä¸­ä¸èƒ½è¢«ç›´æ¥åˆ é™¤ã€‚æ¯”å¦‚ A ä¾èµ– B, B ä¾èµ– C, C ä¾èµ– D ... , å°±ä¼šå‘ç”Ÿæ–‡ä»¶å¤¹ä¾æ¬¡åµŒå¥—çš„æƒ…å†µã€‚

3. æ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½æ”¾ç½®åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­ä¸ä¼šå¯¼è‡´è½¯ä»¶åŒ…çš„ç‰ˆæœ¬å†²çªå—ï¼Ÿ

> åœ¨ç›®å‰çš„ npm ç‰ˆæœ¬ä¸­ï¼Œæ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½ä¼šè¢«ç›´æ¥æ”¾ç½®åœ¨åº”ç”¨æ ¹ç›®å½•çš„ node_modules æ–‡ä»¶å¤¹ä¸­ï¼Œ è¿™æ ·è™½ç„¶è§£å†³äº†æ–‡ä»¶å¤¹åµŒå¥—å±‚æ¬¡è¿‡æ·±å’Œé‡å¤ä¸‹è½½è½¯ä»¶åŒ…çš„é—®é¢˜ï¼Œä½†å¦‚æœåªè¿™æ ·åšè‚¯å®šä¼šå¯¼è‡´è½¯ä»¶åŒ…ç‰ˆæœ¬å†²çªçš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ æ¯”å¦‚ A ä¾èµ– X çš„ 1 ç‰ˆæœ¬ï¼ŒB ä¾èµ– X çš„ 2 ç‰ˆæœ¬ï¼Œå¦‚æœä½ å…ˆä¸‹è½½çš„æ˜¯ Aï¼Œé‚£ä¹ˆ A ä¾èµ–çš„ X ä¼šè¢«æ”¾ç½®åœ¨ æ ¹ç›®å½•çš„ node_modules æ–‡ä»¶å¤¹ä¸­, å½“ä¸‹è½½ B æ—¶ï¼Œç”±äºåœ¨æ ¹ç›®å½•ä¸­å·²ç»å­˜åœ¨ X å¹¶ä¸”ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œé‚£ ä¹ˆ B ä¾èµ–çš„ X å°±ä¼šè¢«æ”¾ç½®åœ¨ B è½¯ä»¶åŒ…ä¸­çš„ node_module æ–‡ä»¶å¤¹ä¸­ï¼Œé€šè¿‡æ­¤æ–¹å¼è§£å†³è½¯ä»¶åŒ…ç‰ˆæœ¬å†²çªçš„é—®é¢˜ã€‚

4. node_modules æ–‡ä»¶å¤¹ä¸­çš„è½¯ä»¶åŒ…éƒ½éœ€è¦æäº¤åˆ° git ä»“åº“ä¸­å—ï¼Ÿ

> åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­æœ‰å¾ˆå¤šè½¯ä»¶åŒ…ï¼Œéšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼Œè½¯ä»¶åŒ…ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œç”šè‡³ä¼š è¾¾åˆ°å‡ ç™¾å…†ã€‚
>
>  å½“æˆ‘ä»¬å°†åº”ç”¨æäº¤åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæˆ‘ä»¬ä¸æƒ³æäº¤å®ƒï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯æˆ‘ä»¬åº”ç”¨ä¸­çš„æºä»£ç ï¼Œè€Œä¸”ç”±äºç¢æ–‡ä»¶æ¯”è¾ƒå¤šï¼Œå…¶ä»–äººåœ¨æ£€å‡ºä»£ç æ—¶éœ€è¦ç­‰å¾…çš„æ—¶é—´ä¼šå¾ˆä¹…ã€‚å½“å…¶ä»–äººæ‹¿åˆ°åº”ç”¨ç¨‹åºæ—¶æ²¡æœ‰ä¾èµ–è½¯ä»¶åŒ…åº”ç”¨ç¨‹åºæ˜¯è¿è¡Œä¸èµ·æ¥çš„ï¼Œå¦‚ä½•è§£å†³å‘¢?
>
> å®é™…ä¸Šåº”ç”¨ç¨‹åºä¾èµ–äº†å“ªäº›è½¯ä»¶åŒ…åœ¨ package.json æ–‡ä»¶ä¸­éƒ½ä¼šæœ‰è®°å½•ï¼Œå…¶ä»–äººå¯ä»¥é€šè¿‡ `npm install` å‘½ä»¤é‡æ–°ä¸‹è½½å®ƒä»¬ã€‚ä¸ºäº†ä¿æŒä¸‹è½½ç‰ˆæœ¬ä¸€è‡´ï¼Œnpm è¿˜ä¼šæ ¹æ® package-lock.json æ–‡ä»¶ä¸­ çš„è®°å½•çš„åœ°å€è¿›è¡Œä¸‹è½½ã€‚
>
>  å°†åº”ç”¨ç¨‹åºæäº¤åˆ°ç‰ˆæœ¬åº“ä¹‹å‰ï¼Œå°† node_modules æ–‡ä»¶å¤¹æ·»åŠ åˆ° .gitignore æ–‡ä»¶ä¸­ã€‚



### 7. è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶

1.ç‰ˆæœ¬å·è§„èŒƒ 

`Major Version ä¸»è¦ç‰ˆæœ¬` ï¼šæ·»åŠ æ–°åŠŸèƒ½ (ç ´åç°æœ‰ API) -> 6.0.0 

`Minor version æ¬¡è¦ç‰ˆæœ¬` ï¼šæ·»åŠ æ–°åŠŸèƒ½ (ä¸ä¼šç ´åç°æœ‰ API, åœ¨ç°æœ‰ API çš„åŸºç¡€ä¸Šè¿›è¡Œæ·»åŠ ) -> 5.13.0 

`Patch version è¡¥ä¸ç‰ˆæœ¬` ï¼šç”¨äºä¿®å¤ bug -> 5.12.6 2. 



ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·

* "^3.0.0" ï¼šé”å®šä¸»ç‰ˆæœ¬ï¼Œä»¥åå®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¿è¯åŒ…æ˜¯3.x.xç‰ˆæœ¬ï¼Œxé»˜è®¤å–æœ€æ–°çš„ã€‚
* "~3.2.x" ï¼šé”å®šå°ç‰ˆæœ¬ï¼Œä»¥åå®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¿è¯åŒ…æ˜¯3.1.xç‰ˆæœ¬ï¼Œxé»˜è®¤å–æœ€æ–°çš„ã€‚
* "3.1.1" ï¼š é”å®šå®Œæ•´ç‰ˆæœ¬ï¼Œä»¥åå®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¿è¯åŒ…å¿…é¡»æ˜¯3.1.1ç‰ˆæœ¬ã€‚





2.ç‰ˆæœ¬å·æ›´æ–°è§„èŒƒ

^5.12.5: ä¸»è¦ç‰ˆæœ¬ä¸å˜ï¼Œæ›´æ–°æ¬¡è¦ç‰ˆæœ¬å’Œè¡¥ä¸ç‰ˆæœ¬ 

~5.12.5: ä¸»è¦ç‰ˆæœ¬å’Œæ¬¡è¦ç‰ˆæœ¬ä¸å˜ï¼Œæ›´æ–°è¡¥ä¸ç‰ˆæœ¬

 5.12.5: ä½¿ç”¨ç¡®åˆ‡ç‰ˆæœ¬ï¼Œå³ä¸»è¦ç‰ˆæœ¬ï¼Œæ¬¡è¦ç‰ˆæœ¬ï¼Œè¡¥ä¸ç‰ˆæœ¬å›ºå®š



### 8. æŸ¥çœ‹è½¯ä»¶åŒ…å®é™…ç‰ˆæœ¬

> å½“è¿‡äº†ä¸€æ®µæ—¶é—´ä»¥åï¼Œå…¶ä»–äººä»ç‰ˆæœ¬åº“ä¸­ä¸‹è½½äº†ä½ çš„åº”ç”¨ç¨‹åºï¼Œå¹¶é€šè¿‡ npm install å‘½ä»¤æ¢å¤äº†åº”ç”¨ ç¨‹åºçš„ä¾èµ–è½¯ä»¶åŒ…ï¼Œä½†æ˜¯æ­¤æ—¶åº”ç”¨ç¨‹åºçš„ä¾èµ–è½¯ä»¶åŒ…ç‰ˆæœ¬å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œåº”ç”¨ç¨‹åºçš„ package.json æ–‡ä»¶ä¸­è®°å½•çš„åªæ˜¯å¤§è‡´ç‰ˆæœ¬ï¼Œå¦‚ä½•æŸ¥çœ‹ä¾èµ–è½¯ä»¶åŒ…çš„å…·ä½“ç‰ˆæœ¬å‘¢ï¼Ÿ
>
> æ–¹å¼ä¸€ï¼šåœ¨ node_modules æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°å¯¹åº”çš„ä¾èµ–è½¯ä»¶åŒ…ï¼Œæ‰¾åˆ°å®ƒçš„ package.json æ–‡ä»¶ï¼Œå¯ä»¥åœ¨è¿™ ä¸ªæ–‡ä»¶ä¸­çš„ version å­—æ®µä¸­æ‰¾åˆ°å®ƒçš„å…·ä½“ç‰ˆæœ¬ã€‚
>
> æ–¹å¼äºŒï¼šé€šè¿‡ npm list å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ä¾èµ–è½¯ä»¶åŒ…çš„å…·ä½“ç‰ˆæœ¬ï¼Œ --depth é€‰é¡¹æŒ‡å®šæŸ¥çœ‹ä¾èµ–åŒ…çš„å±‚çº§ã€‚





### 9.  æŸ¥çœ‹è½¯ä»¶åŒ…å…ƒæ•°æ®

```nginx
npm view mongoose
npm view mongoose versions
npm view mongoose dist-tags dependencies
```



### 10. ä¸‹è½½ç‰¹å®šç‰ˆæœ¬çš„è½¯ä»¶åŒ…

```js
npm i <pkg>@<version>
npm i mongoose@2.4.2 lodash@4.7.0
```

```nginx
cat package.json
npm list --depth 0
```



### 11.  åˆ é™¤è½¯ä»¶åŒ…

```nginx
npm uninstall <pkg>
npm uninstall mongoose
npm un mongoose
```



### 12. æ›´æ–°è½¯ä»¶åŒ…

> é€šè¿‡ `npm outdated` å‘½ä»¤å¯ä»¥æŸ¥çœ‹å“ªäº›è½¯ä»¶åŒ…å·²ç»è¿‡æœŸï¼Œå¯¹åº”çš„æ–°ç‰ˆæœ¬æ˜¯ä»€ä¹ˆã€‚ 
>
> é€šè¿‡ `npm update` æ›´æ–°è¿‡æœŸçš„è½¯ä»¶åŒ…ï¼Œæ›´æ–°æ“ä½œéµå¾ªè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶è§„åˆ™ã€‚





### 13. é¡¹ç›®ä¾èµ– VS å¼€å‘ä¾èµ–

> é¡¹ç›®ä¾èµ–ï¼šæ— è®ºåœ¨å¼€å‘ç¯å¢ƒè¿˜æ˜¯çº¿ä¸Šç¯å¢ƒåªè¦ç¨‹åºåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨çš„è½¯ä»¶åŒ…å°±æ˜¯é¡¹ç›®ä¾èµ–ã€‚æ¯”å¦‚ lodashï¼Œmongooseã€‚ 
>
> å¼€å‘ä¾èµ–ï¼šåœ¨åº”ç”¨å¼€å‘é˜¶æ®µä½¿ç”¨ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸éœ€è¦ä½¿ç”¨çš„è½¯ä»¶åŒ…ï¼Œæ¯”å¦‚ TypeScript ä¸­çš„ç±»å‹å£°æ˜æ–‡ä»¶ã€‚ 
>
> åœ¨ package.json æ–‡ä»¶ä¸­, é¡¹ç›®ä¾èµ–å’Œå¼€å‘ä¾èµ–è¦åˆ†åˆ«è®°å½•ï¼Œé¡¹ç›®ä¾èµ–è¢«è®°å½•åœ¨ dependencies å¯¹è±¡ ä¸­ï¼Œå¼€å‘ä¾èµ–è¢«è®°å½•åœ¨ devDependencies ä¸­ï¼Œä½¿å¼€å‘è€…å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä¸‹è½½ä¸åŒçš„ä¾èµ–è½¯ä»¶åŒ…ã€‚ 
>
> æ ¹æ® package.json ä¸­çš„ä¾èµ–å£°æ˜ï¼Œ å®‰è£…å·¥å…·åŒ…
>
> åœ¨ä¸‹è½½å¼€å‘ä¾èµ–æ—¶ï¼Œè¦åœ¨å‘½ä»¤çš„åé¢åŠ ä¸Š --save-dev é€‰é¡¹æˆ–è€… -D é€‰é¡¹ã€‚ `npm i eslint -D `
>
> åœ¨å¼€å‘åå¢ƒä¸­ä¸‹è½½æ‰€æœ‰ä¾èµ–è½¯ä»¶åŒ…:  ` npm install` æˆ– `npm i`
>
>  åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åªä¸‹è½½é¡¹ç›®ä¾èµ–è½¯ä»¶åŒ…: `npm install --prod`



### 14. ä½¿ç”¨æµç¨‹

å›¢é˜Ÿå¼€å‘æ—¶ä½¿ç”¨æµç¨‹

1. ä»ä»“åº“ä¸­æ‹‰å–ä»“åº“ä»£ç 
2. è¿è¡Œ` npm install `å®‰è£…ç›¸å…³ä¾èµ–
3. è¿è¡Œé¡¹ç›®ï¼Œç»§ç»­å¼€å‘

> æ³¨æ„ï¼šåœ¨.gitignoreæ–‡ä»¶ä¿è¯é…ç½®äº†å¿½ç•¥ /node_modules 

### 15. å‘å¸ƒnpmåŒ…



åˆ›å»ºè‡ªå·±çš„ NPM åŒ…å¯ä»¥å¸®åŠ©ä»£ç è¿›è¡Œè¿­ä»£è¿›åŒ–ï¼Œä½¿ç”¨æ­¥éª¤ä¹Ÿæ¯”è¾ƒç®€å•

0. ä¿®æ”¹ä¸ºå®˜æ–¹çš„åœ°å€ (  npm config set registry https://registry.npmjs.org/ )

1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶ index.jsï¼Œ åœ¨æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨ module.exports æš´éœ²
2. npm åˆå§‹åŒ–å·¥å…·åŒ…ï¼Œpackage.json å¡«å†™åŒ…çš„ä¿¡æ¯
3. è´¦å·æ³¨å†Œï¼ˆæ¿€æ´»è´¦å·ï¼‰,å®Œæˆé‚®ç®±éªŒè¯
4. å‘½ä»¤è¡Œä¸‹ `npm login` å¡«å†™ç›¸å…³ç”¨æˆ·ä¿¡æ¯ (ä¸€å®šè¦åœ¨åŒ…çš„æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ)
5. å‘½ä»¤è¡Œä¸‹`npm publish` æäº¤åŒ… ğŸ‘Œ

> npm æœ‰åƒåœ¾æ£€æµ‹æœºåˆ¶ï¼Œå¦‚æœåå­—ç®€å•æˆ–åšæµ‹è¯•æäº¤ï¼Œå¾ˆå¯èƒ½ä¼šè¢«æ‹’ç»æäº¤
>
> å¯ä»¥å°è¯•æ”¹ä¸€ä¸‹åŒ…çš„åç§°æ¥è§£å†³è¿™ä¸ªé—®é¢˜

å‡çº§ NPM åŒ…ï¼Œéœ€è¦ä¿®æ”¹ package.json ä¸­çš„ç‰ˆæœ¬å·ä¿®æ”¹ï¼Œåªéœ€è¦æ‰§è¡Œã€npm publishã€å°±å¯ä»¥èƒ½æäº¤

1. ä¿®æ”¹åŒ…ä»£ç 
2. ä¿®æ”¹ package.json ä¸­ç‰ˆæœ¬å·
3. npm publish æäº¤



### 16. æ’¤é”€å·²å‘å¸ƒçš„è½¯ä»¶åŒ…

1. åªæœ‰åœ¨å‘å¸ƒè½¯ä»¶åŒ…çš„24å°æ—¶å†…æ‰å…è®¸æ’¤é”€
2.  è½¯ä»¶åŒ…æ’¤é”€å 24 å°æ—¶ä»¥åæ‰èƒ½é‡æ–°å‘å¸ƒ
3.  é‡æ–°å‘å¸ƒæ—¶éœ€è¦ä¿®æ”¹åŒ…åç§°å’Œç‰ˆæœ¬å· 

```nginx
npm unpublish åŒ…å --force
```



###  17. æ›´æ”¹ npm é•œåƒåœ°å€

ç”±äº npmjs.com æ˜¯å›½å¤–çš„ç½‘ç«™ï¼Œå¤§å¤šæ•°æ—¶å€™ä¸‹è½½è½¯ä»¶åŒ…çš„é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ

> å¯ä»¥é€šè¿‡é…ç½®çš„æ–¹å¼æ›´æ”¹ npm å·¥å…·çš„ä¸‹è½½åœ°å€ã€‚ 
>
> 1.è·å– npm é…ç½®  `npm config list -l --json  `
>
> â€‹                            -l åˆ—è¡¨æ‰€æœ‰é»˜è®¤é…ç½®é€‰é¡¹   --json ä»¥ json æ ¼å¼æ˜¾ç¤ºé…ç½®é€‰é¡¹ 
>
> 2.è®¾ç½® npm é…ç½® 
>
> è·å– npm ä¸‹è½½åœ°å€ï¼š npm config get registry 
>
> è·å– npm ç”¨æˆ·é…ç½®æ–‡ä»¶: npm config get userconfig 
>
> 3.æ›´æ”¹ npm é•œåƒåœ°å€
>
> æ·˜å®é•œåƒ : `npm config set registry https://registry.npm.taobao.org`
>
> å®˜æ–¹é•œåƒ : `npm config set registry https://registry.npmjs.org/`
>
> åœ¨å‘å¸ƒå·¥å…·çš„æ—¶å€™, ä¸€å®šè¦å°†ä»“åº“åœ°å€, ä¿®æ”¹ä¸ºå®˜æ–¹çš„åœ°å€





### 18. npx å‘½ä»¤

npx æ˜¯ npm è½¯ä»¶åŒ…æä¾›çš„å‘½ä»¤ï¼Œå®ƒæ˜¯ Node.js å¹³å°ä¸‹è½¯ä»¶åŒ…æ‰§è¡Œå™¨ã€‚ä¸»è¦ç”¨é€”æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸´æ—¶ å®‰è£…è½¯ä»¶åŒ…æ‰§è¡Œååˆ é™¤å®ƒï¼Œç¬¬äºŒä¸ªæ˜¯æ‰§è¡Œæœ¬åœ°å®‰è£…çš„æä¾›å‘½ä»¤çš„è½¯ä»¶åŒ…ã€‚

1.ä¸´æ—¶å®‰è£…è½¯ä»¶åŒ…æ‰§è¡Œååˆ é™¤è½¯ä»¶åŒ…

æœ‰äº›æä¾›å‘½ä»¤çš„è½¯ä»¶åŒ…ä½¿ç”¨çš„é¢‘ç‡å¹¶ä¸é«˜ï¼Œæ¯”å¦‚ create-react-app è„šæ‰‹æ¶å·¥å…·ï¼Œæˆ‘èƒ½ä¸èƒ½ä¸´æ—¶ä¸‹è½½ ä½¿ç”¨ï¼Œç„¶åå†åˆ æ‰å®ƒã€‚

```
npx create-react-app react-test
```

2.æ‰§è¡Œæœ¬åœ°å®‰è£…çš„è½¯ä»¶åŒ…

ç°åœ¨æœ‰ä¸¤ä¸ªé¡¹ç›®éƒ½ä¾èµ–äº†æŸä¸ªå‘½ä»¤å·¥å…·è½¯ä»¶åŒ…ï¼Œä½†æ˜¯é¡¹ç›® A ä¾èµ–çš„æ˜¯å®ƒçš„ 1 ç‰ˆæœ¬ï¼Œé¡¹ç›® B ä¾èµ–çš„ æ˜¯å®ƒçš„ 2 ç‰ˆæœ¬ï¼Œæˆ‘åœ¨å…¨å±€åˆ°åº•åº”è¯¥å®‰è£…ä»€ä¹ˆç‰ˆæœ¬å‘¢ ?

 è¯¥è½¯ä»¶åŒ…å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œå®‰è£…ï¼Œåœ¨ A é¡¹ç›®ä¸­å®‰è£…å®ƒçš„ 1 ç‰ˆæœ¬, åœ¨ B é¡¹ç›®ä¸­å®‰è£…å®ƒçš„ 2 ç‰ˆæœ¬ï¼Œåœ¨åº”ç”¨ä¸­å¯ä»¥é€šè¿‡ npx è°ƒç”¨ node_modules æ–‡ä»¶å¤¹ä¸­å®‰è£…çš„å‘½ä»¤å·¥å…·ã€‚

å°†æ‰€æœ‰è½¯ä»¶åŒ…å®‰è£…åˆ°åº”ç”¨æœ¬åœ°æ˜¯ç°åœ¨æœ€æ¨èçš„åšæ³•ï¼Œä¸€æ˜¯å¯ä»¥é˜²æ­¢è½¯ä»¶åŒ…çš„ç‰ˆæœ¬å†²çªé—®é¢˜ï¼ŒäºŒæ˜¯å…¶ä»–å¼€ å‘è€…åœ¨æ¢å¤åº”ç”¨ä¾èµ–æ—¶å¯ä»¥æ¢å¤å…¨éƒ¨ä¾èµ–ï¼Œå› ä¸ºè½¯ä»¶åŒ…å®‰è£…åˆ°æœ¬åœ°åä¼šè¢« package.json æ–‡ä»¶è®°å½•ï¼Œå…¶ä»– å¼€å‘è€…åœ¨è¿è¡Œé¡¹ç›®æ—¶ä¸ä¼šå› ä¸ºç¼ºå°‘ä¾èµ–è€ŒæŠ¥é”™ã€‚



### 19.é…ç½®å…¥å£æ–‡ä»¶çš„ä½œç”¨

åº”ç”¨ç¨‹åºå…¥å£æ–‡ä»¶å°±æ˜¯åº”ç”¨ç¨‹åºæ‰§è¡Œçš„èµ·ç‚¹ï¼Œå°±æ˜¯å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶æ‰§è¡Œçš„æ–‡ä»¶ã€‚

åœºæ™¯ä¸€ï¼šå…¶ä»–å¼€å‘è€…æ‹¿åˆ°ä½ çš„è½¯ä»¶åŒ…ä»¥åï¼Œé€šè¿‡è¯¥æ–‡ä»¶å¯ä»¥çŸ¥é“åº”ç”¨çš„å…¥å£æ–‡ä»¶æ˜¯è°ï¼Œé€šè¿‡å…¥å£æ–‡ä»¶å¯åŠ¨åº”ç”¨ã€‚ 

åœºæ™¯äºŒï¼šé€šè¿‡ node åº”ç”¨æ–‡ä»¶å¤¹ å‘½ä»¤å¯åŠ¨åº”ç”¨ã€‚node å‘½ä»¤ä¼šæ‰§è¡Œ package.json æ–‡ä»¶ä¸­ main é€‰é¡¹æŒ‡å®š çš„å…¥å£æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šå…¥å£æ–‡ä»¶ï¼Œåˆ™æ‰§è¡Œ index.jsã€‚





### 20.æ¨¡å—æŸ¥æ‰¾è§„åˆ™



##### åœ¨æŒ‡å®šäº†æŸ¥æ‰¾è·¯å¾„çš„æƒ…å†µä¸‹

```js
require("./server")
```

1.æŸ¥æ‰¾ server.js 

2.æŸ¥æ‰¾ server.json

3.æŸ¥æ‰¾ server æ–‡ä»¶å¤¹, æŸ¥çœ‹å…¥å£æ–‡ä»¶ (package.json -> main) 

4.æŸ¥æ‰¾ server æ–‡ä»¶å¤¹ ä¸­çš„ index.js æ–‡ä»¶



##### åœ¨æ²¡æœ‰æŒ‡ä»¤æŸ¥æ‰¾è·¯å¾„çš„æƒ…å†µä¸‹

```js
require("./server")
```

```js
paths: [
    '/Users/administrators/Desktop/Node/code/node_modules',
    '/Users/administrators/Desktop/Node/node_modules',
    '/Users/administrators/Desktop/node_modules',
    '/Users/administrators/node_modules',
    '/Users/node_modules',
    '/node_modules'
]
```



## CNPM

#### ä»‹ç»

cnpm æ˜¯æ·˜å®å¯¹å›½å¤– npm æœåŠ¡å™¨çš„ä¸€ä¸ªå®Œæ•´é•œåƒç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æ·˜å® npm é•œåƒï¼Œç½‘ç«™åœ°å€<http://npm.taobao.org/>

#### å®‰è£…

å®‰è£…é…ç½®æ–¹å¼æœ‰ä¸¤ç§

* npm install -g cnpm --registry=https://registry.npm.taobao.org
* alias cnpm="npm --registry=https://registry.npm.taobao.org \
  --cache=$HOME/.npm/.cache/cnpm \
  --disturl=https://npm.taobao.org/dist \
  --userconfig=$HOME/.cnpmrc"       (åªèƒ½åœ¨Linuxä¸‹ä½¿ç”¨)

#### ä½¿ç”¨

é…ç½®å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨ cnpm å‘½ä»¤æ¥ç®¡ç†åŒ…ï¼Œä½¿ç”¨æ–¹æ³•è·Ÿ npm ä¸€æ ·

```sh
cnpm install lodash
```



## Yarn

#### ä»‹ç»

yarn æ˜¯ Facebook å¼€æºçš„æ–°çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿ npmã€‚

#### ç‰¹ç‚¹

yarn ç›¸æ¯”äº npm æœ‰å‡ ä¸ªç‰¹ç‚¹

* æœ¬åœ°ç¼“å­˜ã€‚å®‰è£…è¿‡çš„åŒ…ä¸‹æ¬¡ä¸ä¼šè¿›è¡Œè¿œç¨‹å®‰è£…
* å¹¶è¡Œä¸‹è½½ã€‚ä¸€æ¬¡ä¸‹è½½å¤šä¸ªåŒ…ï¼Œè€Œ npm æ˜¯ä¸²è¡Œä¸‹è½½
* ç²¾å‡†çš„ç‰ˆæœ¬æ§åˆ¶ã€‚ä¿è¯æ¯æ¬¡å®‰è£…è·Ÿä¸Šæ¬¡éƒ½æ˜¯ä¸€æ ·çš„

#### å®‰è£…

##### yarn å®‰è£…

åªéœ€è¦ä¸€è¡Œå‘½ä»¤å³å¯å®‰è£… yarn

```sh
 npm install yarn -g
```

##### msi å®‰è£…åŒ…å®‰è£…

<https://classic.yarnpkg.com/en/docs/install#windows-stable>

#### ç›¸å…³å‘½ä»¤

yarn çš„ç›¸å…³å‘½ä»¤

1)  yarn --version

2)  yarn init  //ç”Ÿæˆpackage.json   

3)  yarn global add  package (å…¨å±€å®‰è£…)

â€‹	å…¨å±€å®‰è£…è·¯å¾„ `C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Yarn\bin`

4)  yarn global remove less (å…¨å±€åˆ é™¤)

5)  yarn add package (å±€éƒ¨å®‰è£…)

6)  yarn add package --dev (ç›¸å½“äºnpmä¸­çš„--save-dev)

7)  yarn remove package

8)  yarn list //åˆ—å‡ºå·²ç»å®‰è£…çš„åŒ…å ç”¨çš„å¾ˆå°‘

9)  yarn info packageName //è·å–åŒ…çš„æœ‰å…³ä¿¡æ¯  å‡ ä¹ä¸ç”¨

10)  yarn //å®‰è£…package.jsonä¸­çš„æ‰€æœ‰ä¾èµ– 

> npm 5 å¼•å…¥ç¦»çº¿ç¼“å­˜ï¼Œæé«˜äº†å®‰è£…é€Ÿåº¦ï¼Œä¹Ÿå¼•å…¥äº† package-lock.json æ–‡ä»¶å¢å¼ºäº†ç‰ˆæœ¬æ§åˆ¶

yarn ä¿®æ”¹ä»“åº“åœ°å€

```sh
yarn config set registry https://registry.npm.taobao.org
```



## CYarn

è·Ÿ npm ä¸ cnpm çš„å…³ç³»ä¸€æ ·ï¼Œå¯ä»¥ä¸º yarn è®¾ç½®å›½å†…çš„æ·˜å®é•œåƒï¼Œæå‡å®‰è£…çš„é€Ÿåº¦

```sh
npm install cyarn -g --registry "https://registry.npm.taobao.org"
```

é…ç½®åï¼Œåªéœ€å°†yarnæ”¹ä¸ºcyarnä½¿ç”¨å³å¯



### é™„å½•

å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„å·¥å…·åŒ…

```shell
yarn add jquery@1.11.2
```

#### npm æ¸…é™¤ç¼“å­˜

> npm i å®‰è£…é”™è¯¯çš„æ—¶å€™ å¯ä»¥å°è¯•è¿è¡Œ `npm cache clean`

