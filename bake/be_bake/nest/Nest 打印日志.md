## 使用内置的 Logger
创建项目：
```bash
nest new logger-test -p npm
```
进入目录执行 `nest run start:dev` 启动服务。<br />服务启动后， Nest 会打印这些日志：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707752084013-367f46d3-0bf3-4824-8094-bfd5336d01fa.png#averageHue=%23363532&clientId=u1661066d-fbf2-4&from=paste&height=86&id=u2bd81f8d&originHeight=172&originWidth=1478&originalType=binary&ratio=2&rotation=0&showTitle=false&size=74028&status=done&style=none&taskId=u9311c362-1794-40a0-b017-a8e82088392&title=&width=739)<br />new Logger 之后就可以使用它的实例方法：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707752504297-b0b7afd3-7c6c-4aed-95dc-d8698ae13caf.png#averageHue=%23332f2b&clientId=u1661066d-fbf2-4&from=paste&height=446&id=u8fbe2a3f&originHeight=892&originWidth=1190&originalType=binary&ratio=2&rotation=0&showTitle=false&size=157140&status=done&style=none&taskId=ue1e34419-9cf2-444b-82ac-a4049c5ffc8&title=&width=595)<br />浏览器访问，控制台打印出的日志：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707753355753-d0e270dc-96dc-4b86-81ed-5eef079c937b.png#averageHue=%23403c37&clientId=u1661066d-fbf2-4&from=paste&height=72&id=ub746271f&originHeight=144&originWidth=1118&originalType=binary&ratio=2&rotation=0&showTitle=false&size=59613&status=done&style=none&taskId=ua034b8f7-29b9-4306-ae13-3d5ae4cfb25&title=&width=559)<br />log、warn、error、verbose、debug 就是日志级别，[云牧牧] 中是当前所在上下文 context，最后的是内容。

日志可以在创建应用的时候指定开启或自己决定输出什么级别的日志：<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/21596389/1687142262087-53060469-c614-4d58-b104-9c5d99a395f0.png#averageHue=%232f2d2b&clientId=u56a213d5-3f0a-4&from=paste&height=219&id=uee5525e4&originHeight=308&originWidth=597&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=36158&status=done&style=none&taskId=u38b843e8-3493-48d6-a6ec-84b0e296cf1&title=&width=423.6000061035156)

## 自定义日志打印
`my-logger.service.ts`，在这个文件中实现 `LoggerService` 接口：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707821595735-8a330216-0a5a-43d1-acbe-4c9c11dfd2ac.png#averageHue=%232d2c2b&clientId=u98e418ad-a92f-4&from=paste&height=523&id=u604c995e&originHeight=1446&originWidth=1688&originalType=binary&ratio=2&rotation=0&showTitle=false&size=289507&status=done&style=none&taskId=uaa2fc44b-6d88-4933-908c-dec22d06307&title=&width=611)<br />指定自定义 logger：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707821735210-24523e17-4bd9-4b0a-8487-f87451fa44f1.png#averageHue=%2334302c&clientId=uca7c9fb3-25d8-4&from=paste&height=178&id=ubfe9f110&originHeight=356&originWidth=1064&originalType=binary&ratio=2&rotation=0&showTitle=false&size=59009&status=done&style=none&taskId=u0ed1612d-1726-44aa-a7ee-2669b6871d4&title=&width=532)<br />项目启动后，日志是这样的：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707821777851-12947f11-42d2-4707-83da-28e319a39a0e.png#averageHue=%23404040&clientId=uca7c9fb3-25d8-4&from=paste&height=86&id=uf9081aab&originHeight=172&originWidth=902&originalType=binary&ratio=2&rotation=0&showTitle=false&size=32813&status=done&style=none&taskId=u03b53a9a-763b-4a20-92ea-905aaa1035d&title=&width=451)<br />访问 localhost:3000：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707821798296-abf5f2b5-3924-4205-a4fc-11dc76881e5a.png#averageHue=%23414141&clientId=uca7c9fb3-25d8-4&from=paste&height=79&id=u40fa4f99&originHeight=158&originWidth=768&originalType=binary&ratio=2&rotation=0&showTitle=false&size=31074&status=done&style=none&taskId=u8597be4a-9fbf-401d-837b-f20c4ce8d02&title=&width=384)

## 注入依赖
因为上面是我们手动 new 的对象，没法注入依赖，这样做：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707822864624-b19704a6-d37f-46be-9440-ab6e377b4c46.png#averageHue=%23322f2c&clientId=uca7c9fb3-25d8-4&from=paste&height=282&id=u5c8e2a96&originHeight=564&originWidth=1064&originalType=binary&ratio=2&rotation=0&showTitle=false&size=80000&status=done&style=none&taskId=ue257230c-2bb8-49c7-b57b-13524e9c85b&title=&width=532)<br />bufferLogs 就是先不打印日志，把它放到 buffer 缓冲区。 这里通过 `app.get(MyLoggerService)` 获取 `MyLoggerService` 的实例，设置为应用使用日志。<br />注入依赖：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707823031250-7c12778d-cc63-49c9-b474-9fb27ca88582.png#averageHue=%23302d2b&clientId=uca7c9fb3-25d8-4&from=paste&height=387&id=u96aec639&originHeight=774&originWidth=1460&originalType=binary&ratio=2&rotation=0&showTitle=false&size=151069&status=done&style=none&taskId=u035fb69b-dc6a-4e9a-a2b0-3826f834689&title=&width=730)<br />AppModule 里引入：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707823077702-67f94256-5182-4824-ab43-535b2f4a250d.png#averageHue=%232f2d2b&clientId=uca7c9fb3-25d8-4&from=paste&height=156&id=u4366b06c&originHeight=312&originWidth=896&originalType=binary&ratio=2&rotation=0&showTitle=false&size=45155&status=done&style=none&taskId=uee887705-7088-4b82-b1bb-bf2cdd095d2&title=&width=448)<br />打印的日志，证明成功注入了依赖：<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/21596389/1707822761669-5d777bd7-4a11-43da-8758-c0a97923459b.png#averageHue=%233e3b3a&clientId=uca7c9fb3-25d8-4&from=paste&height=162&id=u4bb4be29&originHeight=324&originWidth=952&originalType=binary&ratio=2&rotation=0&showTitle=false&size=56376&status=done&style=none&taskId=u76e6dec6-8eed-4b25-9211-b780715d9ca&title=&width=476)<br />我们还可以把自定义 Logger 封装为全局模块或动态模块，根据情况自行选择即可。
