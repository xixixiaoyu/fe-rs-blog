### eslint 是什么？

你写过 JavaScript 或者 TypeScript 代码吧？有时候代码跑起来没问题，但格式乱七八糟，或者有些地方容易埋坑，比如忘了定义变量就直接用。

eslint 就是个帮你检查代码的工具。它像个“语法警察”，盯着你的代码看，确保它既规范又安全。简单说，它是个静态代码分析工具，能在你写代码的时候找出问题，还能自动帮你修一些小毛病。



### 它是怎么工作的？

1. **读取代码**
    你写完一段代码，eslint 会先把代码读进来。它不是直接看你写的文本，而是通过一个叫“解析器”（parser）的东西，把你的代码转成一种机器能理解的结构，叫“抽象语法树”（AST）。这就像把你的代码拆成一块块乐高，方便后面分析。
2. **套用规则**
    eslint 有一堆规则（rules），比如“变量必须先声明再用”或者“每行结尾别留多余空格”。这些规则是你自己定的，或者用别人配好的规则集（比如 Airbnb 的）。它会拿着你的 AST，去跟这些规则一条条比对，看看哪里不符合要求。
3. **发现问题**
    一旦发现代码违反了某条规则，比如你写了个 console.log 但规则说“不准用”，eslint 就会标记出来，告诉你“这里有问题”。它还能告诉你问题在哪一行哪一列，特别贴心。
4. **修复（可选）**
    有些问题 eslint 不光能找到，还能帮你修。比如你代码缩进是 4 个空格，但规则要求 2 个，它可以直接改成 2 个空格。这得看规则有没有写修复逻辑。
5. **输出结果**
    最后，eslint 会把检查结果扔给你。如果你在命令行跑它，它会打印出一堆报错信息；如果装在编辑器里（像 VS Code），它会直接在代码旁边标红提醒你。

假设你写了这么一段 JavaScript 代码：

```js
function sayHi(name) {
    console.log('Hi ' + name)
      let x = 1
}
```

用 eslint 检查后，可能会跳出这几个问题：

- 'console' 未定义（如果开了 no-console 规则）
- 缩进不一致（第 3 行多了两个空格）
- 建议用模板字符串``Hi ${name}``代替字符串拼接（如果开了 prefer-template 规则）

然后你可以用命令 eslint --fix 让它自动修一部分问题，比如把缩进调整好。



### 背后的关键技术

其实 eslint 能干这些事，靠的是几样核心东西：

- **解析器**：默认用 Espree，也可以换成 Babel 或者 TypeScript 的解析器，兼容不同代码类型。
- **规则系统**：每条规则都像个小侦探，专门检查某类问题，你还能自己写规则。
- **配置文件**：通过 .eslintrc 文件（可以用 JSON 或者 JS 写），你告诉 eslint 要用哪些规则，怎么检查。

比如一个简单的配置文件可能是这样：

```js
{
  "env": {
    "browser": true,
    "node": true
  },
  "rules": {
    "no-console": "warn",
    "indent": ["error", 2]
  }
}
```

这告诉 eslint：代码可能跑在浏览器或 Node.js 环境，禁止用 console 会给警告，缩进必须是 2 个空格，不然报错。



### 为什么它有用？

写代码的时候，人难免出错，尤其是团队合作，风格不统一更麻烦。eslint 就像个统一的标准，大家都按它的规矩来，代码看起来整齐，bug 也少。加上它能跟编辑器、CI 工具（像 GitHub Actions）无缝配合，省心省力。

总之，eslint 就是个帮你管代码质量的好朋友。它通过读代码、比规则、找问题、修问题这一套流程，让你的代码更规范、更可靠。想用好它，装个插件，配几条规则，跑起来试试就知道了。



