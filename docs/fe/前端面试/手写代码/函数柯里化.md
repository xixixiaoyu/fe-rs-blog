### 什么是柯里化？

简单来说，柯里化是把接收多个参数的函数转换成一系列只接收单个参数的函数链。每个函数接收一个参数并返回一个新函数，直到收集齐所有参数后执行原始操作。

举个例子，普通函数是这样的：
```javascript
function add(x, y, z) {
  return x + y + z
}

add(1, 2, 3) // 返回 6
```

柯里化后变成：
```javascript
function curriedAdd(x) {
  return function(y) {
    return function(z) {
      return x + y + z
    }
  }
}

curriedAdd(1)(2)(3) // 依然返回 6
```



### 基础柯里化实现

用箭头函数可以写得更简洁：

```javascript
const add = (x, y, z) => x + y + z
const curriedAdd = x => y => z => x + y + z

// 使用方式
curriedAdd(1)(2)(3) // 6
```



### 通用柯里化函数

看完基础实现，我们来写一个通用的柯里化转换器：

```javascript
function curry(fn) {
  return function curried(...args) {
    // 如果参数够了，直接调用原函数
    if (args.length >= fn.length) {
      return fn.apply(this, args)
    }
    
    // 参数不够，返回新函数等待更多参数
    return function(...moreArgs) {
      return curried.apply(this, [...args, ...moreArgs])
    }
  }
}

// 使用示例
const add = (x, y, z) => x + y + z
const curriedAdd = curry(add)

curriedAdd(1)(2)(3)  // 6
curriedAdd(1, 2)(3)  // 6
curriedAdd(1)(2, 3)  // 6
curriedAdd(1, 2, 3)  // 6
```



### 实际应用场景

柯里化在前端开发中的应用非常广泛：

1. **事件处理**：
```javascript
const handleChange = field => event => {
  console.log(`${field} changed to ${event.target.value}`)
}

// 直接传入不同字段名创建不同处理函数
inputElement.addEventListener('change', handleChange('username'))
```

2. **参数复用**：
```javascript
const fetchFromAPI = baseURL => endpoint => params => {
  return fetch(`${baseURL}${endpoint}`, params)
}

const fetchFromMyAPI = fetchFromAPI('https://myapi.com')
const getUsers = fetchFromMyAPI('/users')
const getUser = fetchFromMyAPI('/user')

// 后续使用超简单
getUsers({ method: 'GET' })
getUser({ method: 'GET', body: JSON.stringify({ id: 1 }) })
```

3. **函数组合**：
```javascript
const discount = x => price => price * (1 - x)
const tax = x => price => price * (1 + x)

// 创建特定折扣和税率函数
const tenPercentDiscount = discount(0.1)
const twentyPercentTax = tax(0.2)

// 组合使用
const calculateFinalPrice = price => twentyPercentTax(tenPercentDiscount(price))
calculateFinalPrice(100) // 先打九折再加 20% 税
```



### 优缺点

优点：
- 参数复用，提高代码复用性
- 提前确认部分参数，形成闭包
- 让函数更具表达力
- 更符合函数式编程思想

缺点：
- 容易让代码变得抽象，增加理解成本
- 调试可能更复杂
- 性能有轻微损耗（多层函数调用）



### 小贴士

刚接触柯里化可能会觉得绕，但多尝试几次就能掌握。最好的学习方法是找一些实际项目中的场景来应用，比如表单处理、API 请求、事件监听等，你会发现柯里化确实能让代码更简洁优雅！
